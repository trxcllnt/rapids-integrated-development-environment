#! /usr/bin/env bash

set -Eeox pipefail

export DEBIAN_FRONTEND=noninteractive

#######################################################
# Install dependencies
#######################################################
apt update
apt install -y --no-install-recommends  \
    python${PYTHON_VERSION}             \
    python${PYTHON_VERSION}-dev         \
    python${PYTHON_VERSION}-distutils

# Remove any existing python alternatives
(update-alternatives --remove-all python >/dev/null 2>&1 || true)

 # Set python${PYTHON_VERSION} as the default python
update-alternatives --install /usr/bin/python python $(realpath $(which python${PYTHON_VERSION})) 1
update-alternatives --set python $(realpath $(which python${PYTHON_VERSION}))

# Install pip
curl -sS https://bootstrap.pypa.io/get-pip.py | python
